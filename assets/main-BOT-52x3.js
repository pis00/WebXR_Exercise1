(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}})();document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("intro"),l=document.getElementById("start-ar"),c=document.querySelector("a-scene"),u=document.getElementById("debug-panel"),e=document.getElementById("permission-help"),t=document.getElementById("perm-back"),n=document.getElementById("target-guide"),i=document.querySelector("[mindar-image-target]");let o=document.getElementById("artSceneObject"),s=document.getElementById("debugCube");!o&&i&&(o=i.querySelector("a-gltf-model")),!s&&i&&(s=i.querySelector("#debugCube"));const d=document.getElementById("exit-btn"),r=y=>{console.log("[DEBUG]",y),u&&(u.textContent="[DEBUG] "+y)},p=()=>{e&&(e.style.display="none")},m=()=>{n&&(n.style.display="flex")},g=()=>{n&&(n.style.display="none")};r("Waiting for Start AR…"),r(`Init refs: targetEntity=${!!i}, artSceneObject=${!!o}, debugCube=${!!s}`);let f=null;i?(i.addEventListener("targetFound",()=>{r("TARGET FOUND – tracking active."),g(),f!==null&&(clearTimeout(f),f=null),o&&o.setAttribute("visible","true"),s&&s.setAttribute("visible","true")}),i.addEventListener("targetLost",()=>{r("Target lost – searching again…"),m(),f=window.setTimeout(()=>{o&&o.setAttribute("visible","false"),s&&s.setAttribute("visible","false")},800)})):r("WARNING: mindar-image-target entity not found in the scene."),t&&a&&t.addEventListener("click",()=>{p(),g(),a.style.display="flex",c&&(c.style.display="none"),d&&(d.style.display="none"),r("Returned to start screen. Waiting for Start AR…")}),d&&d.addEventListener("click",()=>{location.reload()}),l&&a&&c?l.addEventListener("click",()=>{a.style.display="none",c.style.display="block",d&&(d.style.display="block"),m(),r("AR scene shown. MindAR will auto-start. Point your camera at the postcard / QR.")}):(console.error("Missing start button, intro, or scene element."),r("ERROR: Missing start button, intro, or scene element."))});
